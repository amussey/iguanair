SHELL = /bin/sh
VPATH = @srcdir@

subdirs = @subdirs@
top_srcdir = @top_srcdir@
srcdir = @srcdir@
prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = $(exec_prefix)/bin
infodir = $(prefix)/info
libdir = $(prefix)/lib/gnudl
mandir = $(prefix)/man/man1
builddir = $(shell pwd)

CC = @CC@
CPPFLAGS = @CPPFLAGS@
CFLAGS = @CFLAGS@ -fpic
LDFLAGS = @LDFLAGS@
LIBS = @LIBS@
INSTALL = @INSTALL@

SHAREEXT = so
LIBNAME=libiguanaIR.$(SHAREEXT).0
SHAREARG = -shared
ifeq ($(shell uname -m),x86_64)
  LIBDIR  = lib64
else
  LIBDIR  = lib

  ifeq ($(shell uname -s),Darwin)
    DARWIN = 1
    PATH = $(shell getconf PATH):/usr/local/bin:/opt/local/bin:/sw/bin
    export PATH
    LIBDIR  = lib
    CFLAGS += -fPIC
    CPPFLAGS += -I/usr/local/include -I/usr/include -I/opt/local/include -I/sw/include
    LDFLAGS += -L/usr/local/lib -L/usr/lib -L/opt/local/lib -L/sw/lib -framework CoreFoundation -framework IOKit
    # Python needs .so but library should be .dylib
    #SHAREEXT = dylib
    LIBNAME=libiguanaIR.dylib
    SHAREARG = -dynamiclib
    OSSUPPORT = daemonosx.o
  endif
endif
